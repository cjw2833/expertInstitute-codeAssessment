{"ast":null,"code":"import { catchError } from 'rxjs/operators';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { of } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/services/core.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"ngx-echarts\";\nimport * as i5 from \"../../core/pipes/currency-search-filter.pipe\";\n\nfunction LandingComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 42);\n    i0.ɵɵlistener(\"click\", function LandingComponent_div_16_Template_div_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const asset_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.displayAsset(asset_r1);\n    });\n    i0.ɵɵelementStart(2, \"div\", 0)(3, \"div\", 1)(4, \"div\", 14);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 43);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"uppercase\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 44);\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 44);\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"percent\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const asset_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", asset_r1.changePercent24Hr > 0 ? \"p-2 alert alert-success assetHover\" : \"p-2 alert alert-danger assetHover\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(asset_r1.symbol);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 5, asset_r1.name));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(11, 7, asset_r1.priceUsd, \"USD\", \"symbol-narrow\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(14, 11, asset_r1.changePercent24Hr, \"2.2-3\"));\n  }\n}\n\nexport let LandingComponent = /*#__PURE__*/(() => {\n  class LandingComponent {\n    constructor(coreService, currencyPipe) {\n      this.coreService = coreService;\n      this.currencyPipe = currencyPipe;\n      /**\r\n       * @name options\r\n       * @description chart options design set up\r\n       */\n\n      this.options = {};\n      this.exampleArray = [{\n        priceUsd: 2705.8914375397819145,\n        time: \"1651870800000\",\n        date: \"2022-05-06T21:00:00.000Z\"\n      }, {\n        priceUsd: 2701.8797075175675302,\n        time: \"1651872600000\",\n        date: \"2022-05-07T21:30:00.000Z\"\n      }, {\n        priceUsd: 2693.0114326336938373,\n        time: \"1651874400000\",\n        date: \"2022-05-08T22:00:00.000Z\"\n      }, {\n        priceUsd: 2693.3691603924318444,\n        time: \"1651876200000\",\n        date: \"2022-05-09T22:30:00.000Z\"\n      }];\n      this.allAssets = [];\n      this.currentAsset = {\n        id: '',\n        rank: 0,\n        symbol: '',\n        name: '',\n        supply: 0,\n        maxSupply: 0,\n        marketCapUsd: 0,\n        volumeUsd24Hr: 0,\n        priceUsd: 0,\n        changePercent24Hr: 0,\n        vwap24Hr: 0,\n        explorer: ''\n      };\n      this.currentAssetPriceHistory = [];\n      this.downwardTrend = false;\n      this.upwardTrend = false;\n      this.alphabetical = false;\n      this.cost = false;\n    }\n\n    ngOnInit() {\n      this.getAllAssets();\n      this.getCurrentAssetPriceHistory(\"ethereum\", 'd1'); // console.log('assetChartData', this.assetChartData);\n\n      this.options = {\n        legend: {\n          data: ['Currency Price'],\n          align: 'left'\n        },\n        tooltip: {},\n        xAxis: {\n          data: this.formatTimestampToDate(this.exampleArray),\n          silent: false,\n          splitLine: {\n            show: false\n          }\n        },\n        yAxis: {},\n        series: [{\n          name: 'Currency Price',\n          type: 'bar',\n          data: this.parsePriceData(this.exampleArray),\n          animationDelay: idx => idx * 10\n        }],\n        animationEasing: 'elasticOut',\n        animationDelayUpdate: idx => idx * 5\n      };\n    }\n\n    getAllAssets() {\n      this.coreService.getAllAssets().pipe(catchError(error => {\n        if (error instanceof HttpErrorResponse) {\n          // this.logger.error(`There was a problem retrieving Assets data: ${error.message}`);\n          // TODO: change to logger\n          return of([]);\n        } else {\n          // TODO: log error\n          return error;\n        }\n      })).subscribe(response => {\n        this.allAssets = response.data;\n        this.currentAsset = this.allAssets[0];\n      });\n    }\n\n    getCurrentAssetPriceHistory(assetId, interval) {\n      this.coreService.getAssetHistory(assetId, interval).pipe(catchError(error => {\n        if (error instanceof HttpErrorResponse) {\n          // this.logger.error(`There was a problem retrieving Asset History data: ${error.message}`);\n          // TODO: change to logger\n          return of([]);\n        } else {\n          // TODO: log error\n          return error;\n        }\n      })).subscribe(response => {\n        this.currentAssetPriceHistory = response.data;\n        console.log('currentAssetPriceHistory', this.currentAssetPriceHistory);\n      });\n    }\n\n    filterBadges(badgeId) {\n      switch (badgeId) {\n        case 0:\n          {\n            // Alphabetical\n            console.log('alphabetical');\n            this.alphabetical = !this.alphabetical;\n            break;\n          }\n\n        case 1:\n          {\n            // Cost\n            console.log('cost');\n            this.cost = !this.cost;\n            break;\n          }\n      } //TODO: add back filters\n      // if(cost) {\n      //   return list ? list.sort(function(a, b){ return a.priceUsd-b.priceUsd; }) : [];\n      // }\n      // if(alphabetical) {\n      //   return list ? list.sort(function(a, b){\n      //     if (a.name < b.name) {return -1;}\n      //     if (a.name > b.name) {return 1;}\n      //     return 0;\n      //   }) : [];\n      // }\n\n    }\n    /**\r\n     * Calculates the average closing price of the given(candleCount) Candlesticks\r\n     * @param dayCount\r\n     * @param data\r\n     * @returns result\r\n     *\r\n    public calculateMovingAverage(candleCount: number, candleData: AssetCandleData[]) {\r\n      let result = [];\r\n      for (let i = 0, len = candleData.length; i < len; i++) {\r\n        if (i < candleCount) {\r\n          result.push('-');\r\n          continue;\r\n        }\r\n        let sum = 0;\r\n        for (let j = 0; j < candleCount; j++) {\r\n          sum += candleData[i - j].close;\r\n        }\r\n        result.push((sum / candleCount).toFixed(2));\r\n      }\r\n      return result;\r\n    }\r\n    */\n\n    /**\r\n     * Helper function to parse and format date data for asset chart interface from data array\r\n     * @param assetData price data passed from parent function landing.component\r\n     * @returns result: String array of formatted dates\r\n     */\n\n\n    formatTimestampToDate(assetData) {\n      let result = [];\n\n      for (let i = 0; i < assetData.length; i++) {\n        let d = new Date(assetData[i].date);\n        let s = d.getMonth() + 1 + '-' + d.getDate(); // Format: '04-28' aka my birthday :)\n\n        result.push(s);\n      }\n\n      console.log(result);\n      return result; // const date: Date = new Date(parseInt(timestamp));\n      // const dd = String(date.getDate()).padStart(2, '0');\n      // const mm = String(date.getMonth() + 1).padStart(2, '0');\n      // const yyyy = date.getFullYear();\n      // return mm + '-' + dd;\n    }\n    /**\r\n     * Helper function to parse and format price data for asset chart interface from data array\r\n     * @param assetData price data passed from parent function landing.component\r\n     * @returns result: Number array of formatted dates\r\n     */\n\n\n    parsePriceData(assetData) {\n      let result = [];\n\n      for (let i = 0; i < assetData.length; i++) {\n        let p = Math.round((assetData[i].priceUsd + Number.EPSILON) * 100) / 100;\n        console.log(p);\n        result.push(p);\n      }\n\n      console.log(result);\n      return result;\n    }\n\n    displayAsset(asset) {\n      console.log(asset);\n      this.currentAsset = asset;\n    }\n\n    goToLearnMore() {\n      window.open(this.currentAsset.explorer, \"_blank\");\n    }\n\n  }\n\n  LandingComponent.ɵfac = function LandingComponent_Factory(t) {\n    return new (t || LandingComponent)(i0.ɵɵdirectiveInject(i1.CoreService), i0.ɵɵdirectiveInject(i2.CurrencyPipe));\n  };\n\n  LandingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LandingComponent,\n    selectors: [[\"app-landing\"]],\n    decls: 84,\n    vars: 31,\n    consts: [[1, \"row\"], [1, \"col-4\"], [1, \"card\", \"marketCard\"], [1, \"pt-1\", \"card-body\"], [1, \"assetHeader\"], [1, \"mb-2\", \"starNote\"], [1, \"d-flex\"], [\"type\", \"search\", \"name\", \"name\", \"placeholder\", \"Search Currency Name\", \"aria-label\", \"Search\", 1, \"form-control\", \"mb-1\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"assetHover\", 3, \"ngClass\", \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"assetHover\", \"m-1\", 3, \"ngClass\", \"click\"], [4, \"ngFor\", \"ngForOf\"], [1, \"col-8\"], [1, \"card\", \"graphCard\"], [1, \"card-header\", 3, \"ngClass\"], [1, \"currencyHeader\"], [1, \"col-1\"], [1, \"col-1\", \"mt-3\"], [1, \"currencyDescription\"], [1, \"currencyDetails\"], [1, \"col-3\", \"mt-3\"], [1, \"card-body\"], [1, \"col-12\"], [\"echarts\", \"\", 1, \"candle-chart\", 3, \"options\"], [1, \"col-4\", \"mt-3\"], [\"role\", \"group\", 1, \"btn-group\", \"btn-group-sm\"], [\"type\", \"radio\", \"name\", \"btnradio\", \"id\", \"btnradio1\", \"autocomplete\", \"off\", \"checked\", \"\", 1, \"btn-check\"], [\"for\", \"btnradio1\", 1, \"btn\", \"btn-outline-dark\"], [\"type\", \"radio\", \"name\", \"btnradio\", \"id\", \"btnradio2\", \"autocomplete\", \"off\", 1, \"btn-check\"], [\"for\", \"btnradio2\", 1, \"btn\", \"btn-outline-dark\"], [\"type\", \"radio\", \"name\", \"btnradio\", \"id\", \"btnradio3\", \"autocomplete\", \"off\", 1, \"btn-check\"], [\"for\", \"btnradio3\", 1, \"btn\", \"btn-outline-dark\"], [\"type\", \"radio\", \"name\", \"btnradio\", \"id\", \"btnradio4\", \"autocomplete\", \"off\", 1, \"btn-check\"], [\"for\", \"btnradio4\", 1, \"btn\", \"btn-outline-dark\"], [\"type\", \"radio\", \"name\", \"btnradio\", \"id\", \"btnradio5\", \"autocomplete\", \"off\", 1, \"btn-check\"], [\"for\", \"btnradio5\", 1, \"btn\", \"btn-outline-dark\"], [\"type\", \"radio\", \"name\", \"btnradio\", \"id\", \"btnradio6\", \"autocomplete\", \"off\", 1, \"btn-check\"], [\"for\", \"btnradio6\", 1, \"btn\", \"btn-outline-dark\"], [\"type\", \"radio\", \"name\", \"btnradio\", \"id\", \"btnradio7\", \"autocomplete\", \"off\", 1, \"btn-check\"], [\"for\", \"btnradio7\", 1, \"btn\", \"btn-outline-dark\"], [1, \"col-5\"], [1, \"assetDetails\"], [\"type\", \"button\", 1, \"btn\", \"btn-link\", \"currencySymbol\", 3, \"click\"], [\"role\", \"alert\", 3, \"ngClass\", \"click\"], [1, \"currencySymbol\"], [1, \"col-4\", \"currencyDescription\"]],\n    template: function LandingComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\")(5, \"span\", 4);\n        i0.ɵɵtext(6, \"MARKET\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"span\", 5);\n        i0.ɵɵtext(8, \"*prices below shown in USD\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"form\", 6)(10, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function LandingComponent_Template_input_ngModelChange_10_listener($event) {\n          return ctx.searchInput = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\")(12, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function LandingComponent_Template_button_click_12_listener() {\n          return ctx.filterBadges(0);\n        });\n        i0.ɵɵtext(13, \"Alphabetical\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function LandingComponent_Template_button_click_14_listener() {\n          return ctx.filterBadges(1);\n        });\n        i0.ɵɵtext(15, \"Cost\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(16, LandingComponent_div_16_Template, 15, 14, \"div\", 10);\n        i0.ɵɵpipe(17, \"currencySearchFilter\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"div\", 11)(19, \"div\", 12)(20, \"div\", 13)(21, \"div\", 0)(22, \"div\", 1)(23, \"div\", 4);\n        i0.ɵɵtext(24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 14);\n        i0.ɵɵtext(26);\n        i0.ɵɵpipe(27, \"uppercase\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(28, \"div\", 15);\n        i0.ɵɵelementStart(29, \"div\", 16)(30, \"div\", 17);\n        i0.ɵɵtext(31, \"RANK\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 18);\n        i0.ɵɵtext(33);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(34, \"div\", 19)(35, \"div\", 17);\n        i0.ɵɵtext(36, \"CURRENT PRICE\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"div\", 18);\n        i0.ɵɵtext(38);\n        i0.ɵɵpipe(39, \"currency\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(40, \"div\", 19)(41, \"div\", 17);\n        i0.ɵɵtext(42, \"24HR CHANGE (%)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"div\", 18);\n        i0.ɵɵtext(44);\n        i0.ɵɵpipe(45, \"percent\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(46, \"div\", 20)(47, \"div\", 0)(48, \"div\", 21);\n        i0.ɵɵelement(49, \"div\", 22);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(50, \"div\", 0)(51, \"div\", 23)(52, \"div\", 24);\n        i0.ɵɵelement(53, \"input\", 25);\n        i0.ɵɵelementStart(54, \"label\", 26);\n        i0.ɵɵtext(55, \"M15\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(56, \"input\", 27);\n        i0.ɵɵelementStart(57, \"label\", 28);\n        i0.ɵɵtext(58, \"M30\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(59, \"input\", 29);\n        i0.ɵɵelementStart(60, \"label\", 30);\n        i0.ɵɵtext(61, \"H1\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(62, \"input\", 31);\n        i0.ɵɵelementStart(63, \"label\", 32);\n        i0.ɵɵtext(64, \"H4\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(65, \"input\", 33);\n        i0.ɵɵelementStart(66, \"label\", 34);\n        i0.ɵɵtext(67, \"H12\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(68, \"input\", 35);\n        i0.ɵɵelementStart(69, \"label\", 36);\n        i0.ɵɵtext(70, \"D1\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(71, \"input\", 37);\n        i0.ɵɵelementStart(72, \"label\", 38);\n        i0.ɵɵtext(73, \"W1\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(74, \"div\", 39)(75, \"div\", 40);\n        i0.ɵɵtext(76, \"MARKET CAP ($)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(77, \"div\", 18);\n        i0.ɵɵtext(78);\n        i0.ɵɵpipe(79, \"currency\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(80, \"div\", 19)(81, \"button\", 41);\n        i0.ɵɵlistener(\"click\", function LandingComponent_Template_button_click_81_listener() {\n          return ctx.goToLearnMore();\n        });\n        i0.ɵɵtext(82);\n        i0.ɵɵpipe(83, \"uppercase\");\n        i0.ɵɵelementEnd()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngModel\", ctx.searchInput);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", ctx.alphabetical ? \"btn-dark\" : \"btn-outline-dark\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", ctx.cost ? \"btn-dark\" : \"btn-outline-dark\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(17, 13, ctx.allAssets, ctx.searchInput));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngClass\", ctx.currentAsset.changePercent24Hr > 0 ? \"text-white bg-success\" : \"text-white bg-danger\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.currentAsset.symbol);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(27, 16, ctx.currentAsset.name));\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(ctx.currentAsset.rank);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(39, 18, ctx.currentAsset.priceUsd, \"USD\", \"symbol-narrow\"));\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(45, 22, ctx.currentAsset.changePercent24Hr, \"2.2-3\"));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"options\", ctx.options);\n        i0.ɵɵadvance(29);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(79, 25, ctx.currentAsset.marketCapUsd, \"USD\", \"symbol-narrow\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" LEARN MORE ABOUT \", i0.ɵɵpipeBind1(83, 29, ctx.currentAsset.name), \"\");\n      }\n    },\n    directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i2.NgClass, i2.NgForOf, i4.NgxEchartsDirective],\n    pipes: [i5.CurrencySearchFilterPipe, i2.UpperCasePipe, i2.CurrencyPipe, i2.PercentPipe],\n    styles: [\".assetHover[_ngcontent-%COMP%]:hover, .card[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0003,0 6px 20px #00000030}.assetHeader[_ngcontent-%COMP%]{font-size:40px;font-weight:200;text-align:left}.currencyHeader[_ngcontent-%COMP%]{font-size:18px;font-weight:400}.starNote[_ngcontent-%COMP%]{font-size:10px}.currencyDetails[_ngcontent-%COMP%]{font-size:30px;font-weight:200;text-align:center}.assetDetails[_ngcontent-%COMP%]{font-size:14px;font-weight:200;text-align:center}.currencyDescription[_ngcontent-%COMP%]{font-size:16px;text-align:center}.currencySymbol[_ngcontent-%COMP%]{font-size:12px}.graphCard[_ngcontent-%COMP%]{position:fixed}.candle-chart[_ngcontent-%COMP%]{height:400px;width:800px}\"]\n  });\n  return LandingComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}